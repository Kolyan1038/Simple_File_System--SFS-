# Файловая система SFS (Simple File System)

SFS — это простая файловая система, реализованная с использованием FUSE (Filesystem in Userspace) на языке программирования C. Она представляет собой учебный проект, демонстрирующий основные принципы работы файловых систем.

## Содержание

- [Установка зависимостей](#установка-зависимостей)
- [Описание](#описание)
- [Структура данных](#структура-данных)
- [Функциональность](#функциональность)
- [Использование](#использование)
- [Примечания](#примечания)

## Установка зависимостей

Перед сборкой и запуском файловой системы SFS необходимо установить следующие зависимости:

### GCC (GNU Compiler Collection)

GCC — это набор компиляторов для различных языков программирования, включая C. Для установки GCC на Fedora выполните следующую команду:

```
sudo dnf install gcc
```

### FUSE (Filesystem in Userspace)

FUSE — это модуль ядра, который позволяет создавать файловые системы в пространстве пользователя. Для установки FUSE на Fedora выполните следующие команды:

```
sudo dnf install fuse3-devel
sudo modprobe fuse
```


> **Примечание:** Если используется FUSE 3, возможно потребуется заменить `fuse` на `fuse3` в некоторых командах и заголовках.

## Описание

Проект состоит из следующих файлов:

1. `sfs.c` — основной код файловой системы, содержащий реализацию основных функций, таких как создание директорий, получение атрибутов файла, чтение директории и другие.
2. `sfs.h` — заголовочный файл, содержащий определения структур данных, используемых в файловой системе, и прототипы функций.
3. `shell.c` — программа, которая монтирует файловую систему SFS в заданную точку монтирования с использованием FUSE.

## Структура данных

Файловая система SFS использует следующие основные структуры данных:

1. `superblock` — структура, содержащая информацию о файловой системе, такую как битовые карты для свободных блоков данных и индексных дескрипторов.
2. `inode` — структура, хранящая метаданные файла или директории, такие как права доступа, размер, время создания, изменения и доступа.
3. `filetype` — структура, представляющая файл или директорию в файловой системе, содержащая имя, путь, указатель на индексный дескриптор (`inode`) и другие метаданные.

## Функциональность

На данный момент файловая система SFS поддерживает следующие операции:

- Создание директорий (`mkdir`)
- Получение атрибутов файла или директории (`getattr`)
- Чтение содержимого директории (`readdir`)

## Использование

Для сборки и запуска файловой системы SFS выполните следующие шаги:

1. Убедитесь, что на вашей системе установлены компилятор GCC и библиотека FUSE.
2. Скомпилируйте файлы проекта с помощью утилиты `make` и команды:
```
make clean && make
```
3. Создайте директорию для монтирования файловой системы, например:
```
mkdir ~/sfs_mount
```
4. Для удобного доступа к исполняемому файлу можно добавить путь к `./build/release` в переменную PATH:
Перейдите в папку проекта:
```
cd ~/ваш/путь/к/проекту/
```
4.1 Добавьте путь к исполняемому файлу в PATH:
```
echo 'export PATH=$PATH:'$(pwd)'/build/release' >> ~/.bashrc
source ~/.bashrc
```
4.2 Для временного использования:
```
export PATH=$PATH:$(pwd)/build/release
```
5. Запустите файловую систему SFS с указанием точки монтирования:
```
shell -f ~/mnt
```
6. После завершения работы с файловой системой размонтируйте её с помощью следующей команды:
```
fusermount3 -u ~/mnt
```
> **Примечание:** Если у вас установлена старая версия FUSE, используйте `fusermount -u` вместо `fusermount3 -u`.

## Примечания

- Файловая система SFS является упрощённой версией и предназначена для обучения и демонстрации основных принципов работы файловых систем.
- Проект находится в стадии разработки, и функциональность может быть расширена в будущем.
- Для получения дополнительной информации и поддержки обратитесь к документации FUSE и другим ресурсам, связанным с разработкой файловых систем.
